{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Leads Database Schema",
  "description": "Schema for the leads.json file used by the Sales Agent skill",
  "type": "object",
  "required": ["leads", "metadata"],
  "properties": {
    "metadata": {
      "type": "object",
      "required": ["version", "last_updated"],
      "properties": {
        "version": {
          "type": "string",
          "description": "Schema version"
        },
        "last_updated": {
          "type": "string",
          "format": "date-time",
          "description": "Last modification timestamp"
        },
        "total_leads": {
          "type": "integer",
          "description": "Total number of leads in database"
        },
        "stats": {
          "type": "object",
          "properties": {
            "by_status": {
              "type": "object",
              "description": "Count of leads by status"
            },
            "by_priority": {
              "type": "object",
              "description": "Count of leads by priority level"
            }
          }
        }
      }
    },
    "leads": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["id", "company", "contact", "qualification", "status", "created_at", "updated_at"],
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier (UUID format recommended)"
          },
          "company": {
            "type": "object",
            "required": ["name"],
            "properties": {
              "name": {
                "type": "string",
                "description": "Legal company name"
              },
              "website": {
                "type": "string",
                "format": "uri",
                "description": "Company website URL"
              },
              "industry": {
                "type": "string",
                "enum": ["Manufacturing", "Wholesale", "Distribution", "B2B Services", "Technology", "Financial Services", "Pharma/MedTech", "Retail", "Other"],
                "description": "Primary industry classification"
              },
              "sub_industry": {
                "type": "string",
                "description": "More specific industry classification"
              },
              "size": {
                "type": "string",
                "enum": ["1-29", "30-49", "50-99", "100-200", "201-300", "301-500", "501-1000", "1000+"],
                "description": "Employee count range"
              },
              "location": {
                "type": "string",
                "description": "Primary location (City, Country)"
              },
              "canton": {
                "type": "string",
                "description": "Swiss canton code (ZH, BE, BS, etc.)"
              },
              "tech_stack": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "Known technology systems (CRM, ERP, etc.)"
              },
              "pain_points": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "Identified pain points"
              },
              "research_notes": {
                "type": "string",
                "description": "Additional research notes about the company"
              },
              "linkedin_url": {
                "type": "string",
                "format": "uri",
                "description": "LinkedIn company page URL"
              }
            }
          },
          "contact": {
            "type": "object",
            "required": ["name", "title"],
            "properties": {
              "name": {
                "type": "string",
                "description": "Contact's full name"
              },
              "title": {
                "type": "string",
                "description": "Current job title"
              },
              "email": {
                "type": "string",
                "format": "email",
                "description": "Email address"
              },
              "phone": {
                "type": "string",
                "description": "Phone number"
              },
              "linkedin": {
                "type": "string",
                "format": "uri",
                "description": "LinkedIn profile URL"
              },
              "notes": {
                "type": "string",
                "description": "Notes about the contact"
              }
            }
          },
          "qualification": {
            "type": "object",
            "required": ["score", "icp_match"],
            "properties": {
              "score": {
                "type": "integer",
                "minimum": 0,
                "maximum": 100,
                "description": "Total qualification score"
              },
              "icp_match": {
                "type": "boolean",
                "description": "Whether lead matches Ideal Customer Profile"
              },
              "verified_email": {
                "type": "boolean",
                "description": "Whether email has been verified"
              },
              "verified_phone": {
                "type": "boolean",
                "description": "Whether phone has been verified"
              },
              "scoring_breakdown": {
                "type": "object",
                "properties": {
                  "company_fit": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 40
                  },
                  "contact_fit": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 30
                  },
                  "timing_signals": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 30
                  }
                }
              },
              "priority": {
                "type": "string",
                "enum": ["high", "medium", "low"],
                "description": "Priority level based on score"
              }
            }
          },
          "status": {
            "type": "string",
            "enum": ["new", "researched", "contacted", "follow_up", "replied", "meeting_scheduled", "qualified", "disqualified", "nurture"],
            "description": "Current lead status"
          },
          "outreach": {
            "type": "object",
            "properties": {
              "emails_sent": {
                "type": "integer",
                "minimum": 0,
                "description": "Number of emails sent"
              },
              "last_contact": {
                "type": "string",
                "format": "date",
                "description": "Date of last contact"
              },
              "last_response": {
                "type": "string",
                "format": "date",
                "description": "Date of last response received"
              },
              "next_action": {
                "type": "string",
                "description": "Next action to take"
              },
              "next_action_date": {
                "type": "string",
                "format": "date",
                "description": "When to take next action"
              },
              "sequence_stage": {
                "type": "integer",
                "minimum": 0,
                "description": "Current stage in email sequence"
              },
              "email_history": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "date": {
                      "type": "string",
                      "format": "date"
                    },
                    "type": {
                      "type": "string",
                      "enum": ["intro", "follow_up", "value_add", "case_study", "reply"]
                    },
                    "subject": {
                      "type": "string"
                    },
                    "opened": {
                      "type": "boolean"
                    },
                    "replied": {
                      "type": "boolean"
                    }
                  }
                }
              }
            }
          },
          "notes": {
            "type": "string",
            "description": "General notes about the lead"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Custom tags for organization"
          },
          "source": {
            "type": "string",
            "description": "Where the lead was found"
          },
          "created_at": {
            "type": "string",
            "format": "date",
            "description": "Date lead was created"
          },
          "updated_at": {
            "type": "string",
            "format": "date",
            "description": "Date lead was last updated"
          }
        }
      }
    }
  }
}
